<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:v-bind="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>E-mental</title>
    <link rel="stylesheet" type="text/css" href="css/welcome_style.css">
</head>
<body>
<div id="welcome">
    <!--side bar-->
    <div id="mySidenav" class="sidenav">
        <a href="#" id="foldBtn" class="foldBtn" @click.prevent="foldNav">&#9776;</a>
        <a href="#" @click.prevent="target='/getUserInfo'"><img class="menuIcon" src="../static/imgs/ic_user_main.png" th:src="@{imgs/ic_user_main.png}"/>User Info</a>
        <a href="#" @click.prevent="target='/getDashboard'"><img class="menuIcon" src="../static/imgs/ic_dashboard_main.png" th:src="@{imgs/ic_dashboard_main.png}"/>Dashboard</a>
        <a href="#" @click.prevent="target='/getMoodDiary'"><img class="menuIcon" src="../static/imgs/ic_diary_main.png" th:src="@{imgs/ic_diary_main.png}"/>Mood Diary</a>
        <a href="#" @click.prevent="target='/getCalender'"><img class="menuIcon" src="../static/imgs/ic_calendar_main.png" th:src="@{imgs/ic_calendar_main.png}"/>Calendar</a>
        <a href="#" @click.prevent="target='/getReflection'"><img class="menuIcon" src="../static/imgs/ic_reflection_main.png" th:src="@{imgs/ic_reflection_main.png}"/>Reflection</a>
        <a href="#" @click.prevent="target='/getLifestyleHelper'"><img class="menuIcon" src="../static/imgs/ic_lifestyle_main.png" th:src="@{imgs/ic_lifestyle_main.png}"/>Lifestyle Helper</a>
        <a href="#" @click.prevent="target='/getRecommendation'"><img class="menuIcon" src="../static/imgs/ic_recommendation_main.png" th:src="@{imgs/ic_recommendation_main.png}"/>Recommendation</a>
    </div>
    <div id="main" >
        <iframe v-bind:src="target" width="100%" height="100%" frameborder="0"></iframe>
    </div>
</div>
</body>

<script th:src="@{scripts/vue.min.js}"></script>
<script type="text/javascript">
    if (window != top)
        top.location.href = location.href;
    const app = new Vue({
        el:'#welcome',
        data:{
            isFolded:false,
            target:'/getDashboard'
        },
        mounted(){
            window.addEventListener("message", function(data) {
                app.target = data.data.target;
            })
        },
        methods:{
            foldNav() {
                if (!this.isFolded){
                    document.getElementById("mySidenav").style.width = "300px";
                    this.isFolded = true;
                } else {
                    document.getElementById("mySidenav").style.width = "50px";
                    this.isFolded = false;
                }
            },

        }
    })
</script>

</html>